{% extends 'base.html' %}
{% block content %}

{#<form method="POST" action="{{ url_for('sat_view.sat_passes') }}">#}
<form method="POST" action="{{ url_for('sat_view.sat_passes') }}">
    {{ form.hidden_tag() }} <!-- CSRF-токен -->
    <!-- Таблиця з супутниками -->
    <div style="text-align: center; width:80%; max-width: 820px; margin-left: auto; margin-right: auto;">
        <h2>Select Satellites</h2>

            <!-- Вибір дати -->
        <div>
            <label for="observation-date">Date:</label>
            <input type="date" id="observation-date" name="observation_date" value="{{ today }}" required>
        </div>

        <!-- Висота над горизонтом -->
        <div>
            <label for="elevation">Minimum Elevation (degrees):</label>
            <input type="number" id="elevation" name="elevation" min="0" max="90" value="20" required>
        </div>

        <!-- Вибір місця спостереження -->
        <div>
            <label for="location">Observation Location:</label>
            <select id="location" name="location" required>
                <option value="" disabled selected>Select a location</option>
                {% for idx, loc in locations %}
                <option value="{{ idx }}">{{ loc['name'] }}</option>
                {% endfor %}
            </select>
        </div>

            <table id="satellites-table" class="display" style="width: 100%;">
                <thead>
                    <tr style="line-height: 20px;">
                        <th style="text-align:center;">Select</th>
                        <th style="text-align:center;">NORAD ID</th>
                        <th style="text-align:center;">COSPAR ID</th>
                        <th style="text-align:center;">Name</th>
                        <th style="text-align:center;">Priority</th>
                    </tr>
                </thead>
                <tbody>
                    {% for satellite in satellites %}
                    <tr style="line-height: 20px;">
                        <td><input type="checkbox" name="selected_satellites" value="{{ satellite.norad }}"></td>
                        <td>{{ satellite.norad }}</td>
                        <td>{{ satellite.cospar }}</td>
                        <td>{{ satellite.name }}</td>
                        <td>{{ satellite.priority }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>



        <!-- Кнопка Submit -->
        <div style="margin-top: 20px; text-align: center;">
            <button type="submit" style="font-size: 14px; padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
                Submit
            </button>
        </div>
    </div>
</form>

<script>
    // Ініціалізація DataTable для зручності
    $(document).ready(function () {
        $('#satellites-table').DataTable();
    });
</script>
{% endblock %}